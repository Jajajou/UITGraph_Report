\documentclass[12pt,a4paper]{report}
\usepackage[utf8]{vietnam}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{hyperref}
\usepackage{cite}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{float}
\usepackage{setspace}
\usepackage{indentfirst}
\usepackage[labelsep=period]{caption}
\usepackage{titletoc}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{array}
\usepackage{longtable}
\usepackage{tabularx}
\usepackage{subcaption}
\usepackage[numbers,sort&compress]{natbib}

\onehalfspacing % 1.5 line spacing equivalent to MS Word
\setlength{\parskip}{0pt} % No extra spacing between paragraphs
\setlength{\parindent}{1cm}

% Configure caption labels
\DeclareCaptionLabelFormat{vifigure}{Hình #2}
\DeclareCaptionLabelFormat{vitable}{Bảng #2}
\captionsetup[figure]{labelformat=vifigure}
\captionsetup[table]{labelformat=vitable,position=top}

% Figure and Table numbering with chapter prefix (e.g., Hình 5.1, Bảng 2.1)
\numberwithin{figure}{chapter}
\numberwithin{table}{chapter}

% Configure chapter label in document
\renewcommand{\chaptername}{Chương}
\renewcommand{\figurename}{Hình}
\renewcommand{\tablename}{Bảng}

% Capitalize TOC/LOF/LOT titles
\renewcommand{\contentsname}{MỤC LỤC}
\renewcommand{\listfigurename}{DANH MỤC HÌNH}
\renewcommand{\listtablename}{DANH MỤC BẢNG}
\renewcommand{\bibname}{TÀI LIỆU THAM KHẢO}

% Add "Hình" and "Bảng" prefix in List of Figures/Tables
\titlecontents{figure}[0em]
  {\normalfont}
  {Hình~\thecontentslabel:\quad}
  {}
  {\titlerule*[1pc]{.}\contentspage}

\titlecontents{table}[0em]
  {\normalfont}
  {Bảng~\thecontentslabel:\quad}
  {}
  {\titlerule*[1pc]{.}\contentspage}

\geometry{
    a4paper,
    left=3cm,
    right=2cm,
    top=2cm,
    bottom=2cm,
    headheight=18pt,
    footskip=1cm,
}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\leftmark}
\fancyfoot[C]{\thepage}

% Redefine plain style (used on chapter opening pages) to match fancy style
\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyhead[L]{\leftmark}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0.4pt}
}

% =====================================================
% CODE LISTING STYLE
% =====================================================
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}
\lstset{style=mystyle}

% Chapter format: one line, centered, smaller font
\titleformat{\chapter}[block]
  {\normalfont\Large\bfseries\centering}{\MakeUppercase{\chaptertitlename}\ \thechapter:\ }{0pt}{\MakeUppercase}
\titlespacing*{\chapter}{0pt}{0pt}{20pt}

% TOC format for chapters: show "Chương X." format
\titlecontents{chapter}
  [0em]
  {\normalfont\bfseries}
  {\MakeUppercase{\chaptername}\ \thecontentslabel.\ }
  {}
  {\titlerule*[0.5pc]{.}\contentspage}

\begin{document}

% =====================================================
% CUSTOM TITLE PAGE
% =====================================================
% Temporarily reduce margins for cover page
\newgeometry{left=3cm,right=2cm,top=2cm,bottom=2cm}
\begin{titlepage}
\thispagestyle{empty}

% Header - Two columns OUTSIDE the box
\begin{minipage}[t]{0.43\textwidth}
\centering
\textbf{ĐẠI HỌC QUỐC GIA}\\
\textbf{TP. HỒ CHÍ MINH}\\
\textbf{TRƯỜNG ĐẠI HỌC}\\
\textbf{CÔNG NGHỆ THÔNG TIN}
\end{minipage}
\hfill
\begin{minipage}[t]{0.50\textwidth}
\centering
\textbf{CỘNG HÒA XÃ HỘI CHỦ NGHĨA}\\
\textbf{VIỆT NAM}\\
\textbf{Độc Lập - Tự Do - Hạnh Phúc}
\end{minipage}

\vspace{3cm}

% Title OUTSIDE the box
\begin{center}
\textbf{\Large ĐỀ CƯƠNG CHI TIẾT}
\end{center}

\vspace{1.5cm}

% Project details box - ONLY project info inside
\setlength{\fboxsep}{10pt}
\setlength{\fboxrule}{1pt}
\noindent\fbox{\parbox{\dimexpr\textwidth-2\fboxsep-2\fboxrule}{
\textbf{TÊN ĐỀ TÀI TIẾNG VIỆT: Nghiên cứu và phát triển mô hình truy xuất tăng cường tri thức có nhận biết thời gian (Temporal-Aware Graph-RAG) cho tài liệu UIT (UITGraph)}

\vspace{0.2cm}
\noindent\rule{\linewidth}{0.5pt}
\vspace{0.2cm}

\textbf{TÊN ĐỀ TÀI TIẾNG ANH: Research and Development of a Temporal-Aware Graph-RAG Retrieval Model for UIT Documents (UITGraph)}

\vspace{0.2cm}
\noindent\rule{\linewidth}{0.5pt}
\vspace{0.2cm}

\textbf{Cán bộ hướng dẫn} (Học vị, họ và tên, nơi công tác cán bộ hướng dẫn và cán bộ hướng dẫn phụ nếu có):

\textbf{ThS Phạm Nguyễn Phúc Toàn}

\textbf{ThS Lưu Thanh Sơn}

\vspace{0.2cm}
\noindent\rule{\linewidth}{0.5pt}
\vspace{0.2cm}

\textbf{Thời gian thực hiện:} Từ ngày\ldots\ldots\ldots\ldots\ldots\ldots đến ngày\ldots\ldots\ldots\ldots\ldots

\vspace{0.2cm}
\noindent\rule{\linewidth}{0.5pt}
\vspace{0.2cm}

\textbf{Sinh viên thực hiện:}

Đặng Trần Long - 22520805

Hoàng Bảo Long - 22520807
}}

\end{titlepage}
% Restore normal margins
\restoregeometry

% =====================================================
% MỤC LỤC
% =====================================================

% Turn off page numbering for front matter
\pagenumbering{gobble}

\addcontentsline{toc}{chapter}{MỤC LỤC}
\tableofcontents
\newpage

% =====================================================
% DANH MỤC HÌNH ẢNH
% =====================================================
\addcontentsline{toc}{chapter}{DANH MỤC HÌNH}
\listoffigures
\newpage

% =====================================================
% DANH MỤC BẢNG BIỂU
% =====================================================
\addcontentsline{toc}{chapter}{DANH MỤC BẢNG}
\listoftables
\newpage

% Start page numbering from Chapter 1
\clearpage
\pagenumbering{arabic}
\setcounter{page}{1}

% =====================================================
% CHAPTERS
% =====================================================
\input{chapters/chapter1_tongquan}
\input{chapters/chapter2_nghiencuulienquan}
\input{chapters/chapter3_baitoan}
\input{chapters/chapter4_muctieu}
\input{chapters/chapter5_phuongphap}
\input{chapters/chapter6_ketqua}

% =====================================================
% BIBLIOGRAPHY
% =====================================================
\bibliographystyle{ieeetr}
\bibliography{references}

\end{document}
